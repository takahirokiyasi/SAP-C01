# SMS(Server Migration Service)
`VMware vSphereインフラストラクチャ`、`Azure仮想マシン`または`Microsoft Hyper-V / SCVMM仮想マシン`のからAmazon EC2に`仮想マシン`をインポートすることができる。  
サーバー仮想マシンをクラウドホストの Amazon マシンイメージ (AMI) として段階的にレプリケートし、Amazon EC2 にデプロイする。
EC2 VM Import を大幅に強化したサービス
## 手順
1. 移行先のAWSにSMSを立ち上げる
1. Server Migration Connectorをオンプレミス側のVMwareに立ち上げる
1. SMS Connectorが移行可能な仮想マシンの情報を移行元から自動で取得しAMIとしてS3に保管
1. Amazon EC2を起動
1. Route53を使ってる場合はDNSで切替


[SMSの使い方](https://cloudnavi.nhn-techorus.com/archives/1454)

# VM Import/Export
仮想マシン(VM)イメージを既存の仮想化環境からAmazon EC2にインポートし、それを元の環境にエクスポートすることができます。この方法を使うと、アプリケーションおよびワークロードを Amazon EC2 へ移行したり、VM イメージカタログを Amazon EC2 にコピーしたり、バックアップと災害対策のために VM イメージのリポジトリを作成することができます。
今はSMSの方を使用すること推奨（SMSの方が機能が強化されている）


# AWS License Manager
ソフトウェアベンダーのライセンスを簡単に管理できるようになるサービス。
AWS License Manager により、管理者はライセンス契約の規約をエミュレートするカスタマイズされたライセンスルールを作成し、EC2 のインスタンスの起動時にそれらのルールを適用できる。
管理者はこれらのルールを使用して、契約が定める以上のライセンスを使用する、または短期的に異なるサーバーにライセンスを再割り当てするといったライセンス違反を規制できる。
AWS License ManagerはAWSのサービスと統合し、1つのAWSアカウントを通じて、複数のアカウント、ITカタログ、オンプレミスにわたってライセンスの管理を簡素化する。
ライセンス管理者はAWS Service Catalogでルールを追加できる。


## AWS Connector for vCenter
AWS SMSを利用する際は、AWS Connector for vCenterと呼ばれるコネクターを移行対象となるオンプレミス環境のサーバーにインストールします。これによって、GUIを使用してVMware vSphereインフラストラクチャからAmazon EC2に仮想マシンをインポートできます。VMware vCenter から Amazon EC2に移行する仮想マシンから EC2 インスタンスを起動します。AWS Connector for vCenter を使用して仮想マシンを Amazon EC2 に移行する。

# Amazon RDS on VMware
オンプレミスの VMware 環境で Amazon RDS マネージド型データベースをデプロイすることができる。

# AWS Application Discovery Service(AWS ADS)
オンプレミスデータセンターの情報を収集し、そのデータに基づいてTOC(制約条件)を算出して移行計画を作成することができます。
ADSはオンプレミスデータセンターに関する情報を収集し、移行プロジェクト計画を立案することを支援するAWSサービスです。データセンター移行計画には何千ものワークロードが存在し、多くの場合それらが相互に深く依存しあっています。サーバーの使用率データや依存関係のマッピングは、移行プロセス初期の重要なステップです。ADSでは、`サーバーの設定データ`、`使用状況データ`、`動作データ`が収集されて、ユーザーに提供されます。これにより、ユーザーはワークロードを十分に把握することができます。 

収集されたデータは、ADS のデータストアに暗号化形式で保存されます。このデータを CSV ファイルとしてエクスポートし、AWS で稼働した場合の総所有コスト (TCO) の見積もりや、AWS への移行計画に使用できます。また、このデータは AWS Migration Hub でも利用できます。このサービスでは、検出したサーバーを AWS に移行し、AWS に移行する際の進捗を追跡できます。

# DatePipeline
オンプレミスのデータソース間で信頼性の高いデータ処理やデータ移動を行うことを支援するウェブサービスです。AWS Data Pipeline を使用すると、保存場所にあるお客様のデータに定期的にアクセスし、必要なスケールのリソースで変換と処理を行い、その結果を Amazon S3、Amazon RDS、Amazon DynamoDB、Amazon EMR のような AWS サービスに効率的に転送できます。

仮想テープライブラリーにデータを保存するといった設定方法はできない

# DMS(AWS Database Migration Service)
AWS Database Migration Serviceのテーブルマッピングにより、データソース、ソーススキーマ、データ、そしてタスク実行中に必要なすべての変換を指定するための複数のルールタイプを使用します。テーブルマッピングを使用して、データベースで移行する個々のテーブルや、移行に使用するスキーマを指定できます。また、フィルタを使用して、レプリケートする特定テーブルの列からデータを指定でき、変換を使用してターゲットデータベースに書き込むデータを変更できる。

AWS Database Migration Serviceコンソールから、移行タスクを定義して、実行する詳細設定が可能となっています。

テーブルマッピングはJSON 形式で作成されます。AWS DMS マネジメントコンソールを使用して移行タスクを作成する場合、JSON を直接テーブルマッピングボックスに入力できます。CLI または API を使用して移行を実行する場合、JSON ファイルを作成して移行中に適用するテーブルマッピングを指定できます。

## 移行手順
1. レプリケーションインスタンスを配置する、Replication Subnet Groupを作成する
1. ソースデータベースからターゲットデータベースにデータを割り当てて移行するタスクを実行するのに十分なストレージと処理能力を持つレプリケーションインスタンスを作成する
1. ソースエンドポイントにオンプレのデータベースを指定し、ターゲットデータベースにRDSを指定する。（endpoint設定）
1. migrate existing data（初期転送のみ）などのtask設定を行う

# Database Migration Service(DMS)
AWS DMSはデータベースの移行を支援するサービス。移行元としてオンプレ及びAWSのデータベースを選択することができる。移行先はEC2上のRDBもしくはRDS
同種のDBだけでなく異なるデータベースエンジンでも対応可能
データ型やプロシージャーの差異を変換する必要があるがそれはSCTを使う

## 手順
1. `AWS Schema Conversion Tool`を使用してソーススキーマとコードをターゲットデータベースのそれに一致するように変換し、次にAWS Database Migration Serviceを使用してソースデータベースからターゲットデータベースにデータを移行します。
1. 必要なデータ型の変換はすべて、移行中にAWS Database Migration Serviceによって自動的に行われます。
1. ソースデータベースは、Amazon EC2インスタンスで実行されているAWS以外の独自の施設に配置することも、Amazon RDSデータベースにすることもできます。
1. ターゲットは、Amazon EC2またはAmazon RDSのデータベースにすることができます。 

## DynamoDBへの移行
DynamoDBへ移行するために、レガシーデータベースから抽出したCSVファイルをS3にアップロードします。その上で、AWS DMSコンソールを利用してS3をソースエンドポイントに、DynamoDBをターゲットエンドポイントに指定して、テーブルマッピングを追加することができます。

AWS Database Migration Services（AWS DMS）を利用してデータベース移行する際にデータソースが古いか、サポートされていない可能性があります。その場合はCSV形式でデータをエクスポートできれば、データを移行またはプラットフォーム変更できます。DMSはこのデータベースタイプをサポートしていませんが、S3にアップロードした後、CSVファイルを使用できます。AWS DMSはデータベース移行のソースとしてAmazon S3を利用することができるからです。

S3がソースエンドポイントである場合、外部テーブル定義が必要です。 外部テーブル定義は、AWS DMSがAmazon S3からのデータをどのように解釈するかを説明するJSONドキュメントです。JSONファイルをテーブルマッピングボックスに直接入力して定義することが可能です。

# S3への移行
容量が大きい場合はSnowサービスだが、２日などの短期間では完了しない
期限が短い時はあらかじめS3 syncコマンドで前もってS3にアップロード
セキュリティを大事にする場合はDirect Connectで専用線確保してS3 syncでアップロード
オンプレストレージのバックアップの作成の場合はstorage gateway

# 移行戦略
## リホスト
リホストはビジネスケースを満たすために組織がその移行とスケーリングを迅速に実装しようとしている大規模なレガシー移行方法です。アプリケーションの大部分がリホストされます。ほとんどのリホスティングは、AWS SMSなどのツールを使用して自動化できますが、レガシーシステムをクラウドに適用する方法を学習するときに手動で行うこともできます。また、アプリケーションがクラウドで既に実行されていると、再設計が容易になることもあります。
アプリケーションは修正せず、サーバーからEC2に載せ替える

## リプラットフォーム
リプラットフォームでは既存アプリケーションのコアアーキテクチャを変更せずにクラウドプラットフォームへと切り替えを行います。たとえば、これはAmazon Relational Database Service（RDS）などの管理されたリレーショナルデータベースサービスに移行する、またはAWS Elastic Beanstalkなどの完全に管理されたプラットフォームにアプリケーションを移行することにより、データベースインスタンスの管理に費やす時間を削減したい場合に利用されれます。

## 再購入
再購入とは移行に際して別の製品に移行する決定であり、組織が使用している既存のライセンスモデルを変更する場合に用いられます。

## リファクタリング/リアーキテクト(再設計)
リファクタリングはアプリケーションの既存環境では達成することが困難な機能やスケール、またはパフォーマンスを追加する強いビジネスニーズによって推進されます。例えば全体のアーキテクチャ構成を大きく変更し、サービス指向アーキテクチャ（SOA）に移行することで俊敏性を高め、ビジネスの継続性を改善する場合などがあります。
アプリケーションを再設計すると共に、開発方法を変更し、クラウドネイティブな実装に作り変える

## 引退
利用することがないIT資産を識別して廃止します。継続されるリソースの維持に集中する際に利用されます。 

## 保持
移行準備ができていない場合にITリソースの一部を保持します。