# S3
## タイプ
### S3低頻度アクセス (1ゾーン - IA)
1ゾーンなので可用性は低い
それほど通常のS3と料金が変わらない
### Glacier
アーカイブ用途のストレージクラス
データ取り出しは3〜5時間程度

### Glacier Deep Archive
アーカイブ用途のストレージクラス
 - 一年のうち1,2回しかアクセスされないようなデータを対象にした最も低コストなストレージクラス
 - 最小保存期間は180日で、最低180日よりも前にオブジェクトを削除した場合、180日分課金される
 - 復元オプションの標準取り出しで`12時間以内`、一括取得で48時間以内待つ必要がある

### 低冗長化ストレージ（RRS）
それほど重要でないデータを保存

## バケットポリシー
デフォルトでは何も設定されていない

## クロスアカウントアクセス
別のAWSアカウントにS3バケットに保存されているオブジェクトをのアクセスを許可することができる
※データ転送料はバケット所有者が負担する
principalにAWSアカウントのIDを設定する

## マルチパートアップロードAPI
マルチパートアップロードAPIを使用すると、大容量オブジェクトをいくつかに分けてアップロードできるようになります。スループットの向上を図れるし、直接S3にアップロードできるのでコストが安い

## リクエスタ支払い
バケットへのリクエスト及び、データのダウンロードにかかるコストをリクエスタが支払うように変更することができる。

## VPCエンドポイント
S3バケットポリシーを使用してS3バケットにアクセスできるVPCとVPCエンドポイントを指定することが必要

## 暗号化
### デフォルト暗号化
バケットに保存される際にすべての新しいオブジェクトが暗号化される
オブジェクトは、Amazon S3 で管理されたキー (SSE-S3) または AWS Key Management Service (AWS KMS) に保存されたカスタマーマスターキー (CMK) のいずれかで、サーバー側の暗号化を使用して暗号化

#### サーバーサイド暗号化
Amazon S3 はオブジェクトをディスクに保存する前に暗号化し、オブジェクトをダウンロードするときに復号する

#### SSE-S3
- AmazonS3がデータ暗号化キーとマスター暗号化キーを管理
- キーに対する個別アクセス制限は不可、実質的なアクセス制限は署名バージョン4による当該AWSアカウントID以外の拒否のみとなる
- Advanced Encryption Standard (AES-256)で暗号化します。
- 監査証跡(CloudTrail)には残らない
- 無料

#### SSE-KMS
- AWSマネージド型キーまたは、カスタマー管理型のキーがありKMSでキーを管理
- キーポリシーでCMK(カスタマーマスターキー)への個別のアクセス制御ができる
- KMSに対するAPIコールに当たるため、監査証跡(CloudTrail)を残すことが可能
- 暗号化キーの作成および管理ができる
- 追加料金発生

### SSE-C
ユーザーが暗号化キーを管理
Amazon S3はSSE-Cの使用時にHTTP経由で行われたリクエストを拒否します。Amazon S3 REST API呼び出しの場合、次の3つのHTTPリクエストヘッダーを全て含める必要があります。

x-amz-server-side-encryption-customer-algorithm
x-amz-server-side-encryption-customer-key
x-amz-server-side-encryption-customer-key-MD5 

## バージョン管理
S3バージョン管理を有効にすると、既存のファイルはすべて、バージョンIDがNULLになる。
バージョン管理後に追加されたオブジェクトの最初のバージョンIDは1つ目のID（IDは一意のランダム値）

## S3 Select
クエリ処理を行うことで、オブジェクトデータの条件付きで検索・抽出することはできますが、大量データの検索機能としては不十分

## S3 Sync
aws cliのコマンドでローカルからファイルをS3にアップロードすることができる

## Amazon S3 Batch Operations
Amazon S3のバケットに保存されているオブジェクトに対して一括でAPIを実行できる機能です。

# storage gateway
オンプレミスからAWS上のストレージへのアクセスを提供するもの。
オンプレミスサーバーからNFSインターフェイス経由でAWS上のS3オブジェクトに接続したり、オンプレミスにあるデータをS3上にアップロードすることができる。
storage gateway用の仮装マシンやストレージを用意する必要がある。

## storage gatewayの種類
### ファイルゲートウェイ
`S3`への`NFSやSMB`などのプロトコルによるインターフェイスを提供する。
オンプレミスのサーバーから直接S3のファイルにアクセスできる。
### ボリュームゲートウェイ
`S3`及び`EBS snapshots`をバックエンドとしたブロックストレージ
`iSCSIブロックインターフェイス`
#### Gateway-stored-volumes（保存型ボリュームゲートウェイ）
オンプレミスのデータのスナップショットを非同期にS3にバックアップする。データセット自体はオンプレ側にあるので、データセット全体への低レイテンシーアクセスが必要な場合はこれ
#### Gateway-cached-volumes（キャッシュ型ボリュームゲートウェイ）
データセット全体をS3に保存し、頻繁にアクセスするデータサブセットのコピーをオンプレミス側に保存する。オンプレミスのストレージの拡張コストを抑えることができる。
### テープゲートウェイ
`iSCSI仮想テープライブラリ（VTL）`インターフェイス
`S3`と`Glacier`にデータを保管する
物理テープライブラリの代替として利用する。

# AWS Snow
## AWS Snowcone
AWS Snowの中で最小のエッジコンピューティング、エッジストレージ、データ転送デバイス
8TB
## Snow Ball
### Snowball Edge Storage Optimized
vCPU40個分のコンピューティング能力があり、ローカルストレージや大規模データ転送に最適
大規模なデータ移行と容量指向のワークロードに適している多くのストレージを備えた
80TB
### Snowball Edge Compute Optimized
り高いパフォーマンスのワークロードに適している多くのコンピューティング機能を備えた
42TB
## AWS Snowmobile
最大100 PBのデータを長さ14mの丈夫な輸送コンテナで転送する