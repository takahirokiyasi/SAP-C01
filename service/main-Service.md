# EC2
## インスタンスタイプ
ネットワーク帯域はインスタンスタイプによって決まる

### 汎用
M4 M5
### メモリ最適化
R4 R5 X1e
大量のメモリ容量が必要なDBサーバー等に利用
### コンピューティング最適化
C4 C5
APサーバーや画像処理に使用
### ストレージ最適化
D2 H1 I3
高速なIPOSや、大容量ストレージ容量が必要なDBサーバー、Data Warehouse、ビッグデータ処理に利用
### グラフィカルインスタンス
G3 G2
NVIDIA Tesla M60 GPUにアクセス可能

### 追加機能
C5nなどインスタンス世代の番号の後にオプション表記があるものがある
- d：標準インスタンスに対して、内臓ストレージ(インスタンスストア)を内蔵
- n：標準インスタンスに対して、ネットワークを強化
- a：AMDのCPUを搭載

## Auto Recovery
ネットワークやハードウェアの不具合によって発生したシステムステータスチェックの失敗をトリガーにしてEC2インスタンスを再起動することができる。

## プレイスメントグループ
プレイスメントグループの設定は先にプレイスメントグループを構成した上で、その中でインスタンスタイプとインスタンス数を決定することが必要
インスタンスタイプは同じものでないとだめ

### プレイスメントグループの追加
インスタンスタイプを統一し、追加に伴うインスタンス総数を再設定して追加した上で、プレイスメントグループを再起動することが必要。
既存のプレイスメントグループに新規EC2インスタンスを追加する際は、インスタンスグループ全体を一旦停止してから、新規EC2インスタンスをグループに追加して、プレイスメントグループにあるEC2インスタンスを再起動することで解決することができる

## EC2フリート
EC2フリートはスポットインスタンスとオンデマンドインスタンスを組み合わせて定義ができるもの
## スポットフリート
スポットフリートはスポットインスタンスしか定義ができないフリートの集まり（オプションでオンデマンドインスタンスもできる）

# ECS
## EC2を使用する場合のAuto Scaling 
ECS Cluster Auto Scalingを有効にするには、Capacity Providerと呼ばれる新たな項目を設定する必要があります。
1つのCapacity Providerは1つのEC2 Auto Scalingグループに関連付けられます。
あるAuto ScalingグループにECS Capacity Providerを関連付けてから、ECSクラスターにCapacity Providerを追加すると、クラスターを自動スケールできるようになります。

# ELB
## スティッキーセッション
同じ利用者からのリクエストを同じEC2インスタンスで処理するようにルーティングする（ステートフルなサービスで使う）
→ステートフルをステートレスにするためにセッション情報をElastiCacheなどsで管理するように改修した方が良い

急激にアクセスが増加する`スパイク`にはALB+EC2の構成ではスケールアウトに時間がかかるので対応できない。

## Evaluate Target Health
Route53のALBに対しての正常性のチェック
レイテンシーベースルーティングを使用している場合、Route 53 は、DNS クライアントまたはリゾルバーの場所からレイテンシーが最も低いレコードを返します。

# Elastic Beanstalk
## Elastic Beanstalk Tomcat Platform

# Lambda
## LambdaとX-Ray
Lambdaの処理ステップのどこがボトルネックかを用意に判別できるようになる
## VPC Lambda
NATgatewayを使わないとインターネット接続できない。

## Lambda@Edge
※cloudfrontの機能
Lambda@Edgeとは、AWS Lambda の拡張機能で、CloudFront が配信するコンテンツをカスタマイズする関数を実行できるコンピューティングサービスで世界中のビューワーの最寄りのAWSのロケーションで実行することができる。
CloudFrontディストリビューションをLambda@Edge関数に関連付けると、CloudFront は、CloudFrontエッジロケーションでリクエストとレスポンスを傍受します。Lambda関数は、次のCloudFrontイベントの発生時に実行できる。

 - CloudFront がビューワーからリクエストを受信したとき (ビューワーリクエスト)
 - CloudFront がリクエストをオリジンに転送する前 (オリジンリクエスト)
 - CloudFront がオリジンからレスポンスを受信したとき (オリジンレスポンス)
 - CloudFront がビューワーにレスポンスを返す前 (ビューワーレスポンス)

 # SWF(Amazon Simple Workflow Service)
 Amazon SWF は、開発者が並行したステップまたは連続したステップがあるバックグラウンドジョブを構築、実行、スケールするのに役立つ。Amazon SWF は、クラウド内の完全マネージド型の状態トラッカー、およびタスクコーディネーターとみなすことができる。

SWFでもSWFアクティビティの代わりにLambdaを実行することができる

例）動画の処理

# AWS Step Function
個々のLambdaをつなげるためのサービス

## SWF・Step Function使い分け
AWS Step Functions では、AWS の複数のサービスをサーバーレスのワークフローに整理できるため、すばやくアプリケーションをビルドおよび更新できます。これを利用することでSWFよりも視覚的に容易にワークフローを作成できるため、通常のワークフロー作成ではAWS Step Functionsの利用が推奨されている。
プロセスにおいて介入する外部信号が必要な場合、または結果を親に返す子プロセスを起動する場合は、AWS Step Functions では対応できないため、Amazon SWF使用することが求められている。

# App Sync
AppSyncはAWSの管理系GraphQLサービスにて、ApolloやPrismaと比べてAWSからインフラやサーバーまで提供してくれるサービス
デバイス間でアプリケーションデータを同期するためのサービス

# その他の知識
## RTO（目標復旧時間）
RTOは、インシデントが発生してから通常業務をオンラインに戻すまで「ダウンを許容できる最大時間」を指す。
## RPO(目標復旧時点)
RPOとは、インシデント後に通常運営を再開するために「復旧しなければならないバックアップファイルの古さ」を示す。
例）
2時にサーバーが停止してしまった場合にRPOが15分だと1時45分までのデータは復旧しないといけない
1時45分から2時までの間のデータは失われる。