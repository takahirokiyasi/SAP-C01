# リージョン間でPEMキー（SSHキーファイル等）を移行する方式
コピーされたAMIを起動する際にはPEMキーを指定して起動し、会社では管理方針としてPEMキーを単一のキーで一元的に利用するということが決められている場合
利用するOSなどのライセンス認証情報はAMIに含まれているため、AMIの内容はリージョン全体にコピーされます。ただし、その際にPEMキーはコピーされないため、別途明示的にインポートする必要があります。PEMキーをインポートするためのAWSコンソールとAWS CLIを利用することでPEMキーを別リージョンにコピーすることができます。

以下の形式がサポートされています。
- OpenSSH パブリックキー形式
- SSH パブリックキーファイル形式 (RFC4716 で指定)
- SSH プライベートキーファイルの形式が PEM である必要があります (たとえば、ssh-keygen -m PEM を使用して、OpenSSH キーを PEM 形式に変換)
- RSA キーを作成します。Amazon EC2 では DSA キーは使用できません。
- サポートされている長さは 1024、2048、および 4096 です。

# Lambda + API gatewayのサーバーレスアーキテクチャの構成方法
API GatewayとLambdaファンクションを統合して実行するための方法は `Lambdaカスタム統合`と`Lambdaプロキシ統合`の２つあります。 
プロキシ統合の場合はAPIgatewayがLambdaに処理を投げるだけ
Lambda カスタム統合では、プロキシ統合のセットアップ手順に加えて、受信リクエストデータがどのように統合リクエストにマッピングされるか、統合レスポンスデータの結果がメソッドレスポンスにどのようにマッピングされるかを指定しないといけない。

Lambda プロキシ統合の設定でAPI にコンテンツのエンコーディングやキャッシュが不要な場合は、統合の HTTP メソッドを POST に設定し、統合エンドポイント URI を特定の Lambda 関数のアクションを呼び出す Lambda 関数の ARN に設定し、認証情報を API Gateway がユーザーに代わって Lambda 関数を呼び出すことを許可する権限を持つ IAM ロールを設定するだけです。

Lambda オーソライザーは、Lambda 関数を使用して API へのアクセスを制御する API Gateway の機能です。Lambda オーソライザーは、OAuth や SAML などのベアラートークン認可戦略を使用します。または発信者 ID を判断するためにリクエストパラメータを使用するカスタム認証スキームを実装する場合に便利です。この設定のためにはLambda コンソールで API Gateway Lambda オーソライザー関数を作成し、認証情報を API Gateway がユーザーに代わって Lambda 関数を呼び出すことを許可する権限を持つ IAM ロールを設定することが必要です。
